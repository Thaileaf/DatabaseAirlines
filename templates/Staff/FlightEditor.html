<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel = "stylesheet" href="{{ url_for('static', filename='main.css') }}"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <title>Airline</title>
</head>
<body>

<div class="header">
    {% if airline %}
    <h1 style="text-align: center"> {{airline}} Flights</h1>
    {%endif%}
</div>
<div style="text-align: center">
<div>
    <form action="/flights" id="addFligthsForm" method="POST" style="text-align: center;">
        <label for="airport">Airport: </label>
        <select id="airport" name="airport">
        {% for line in airports %}
            <option name="airport" id="airport_s" value={{line['name']}}>{{line['name']}}</option> <!-- Vscode doesn't like that-->
        {% endfor %}
        </select>
        <label for="roundtrip">Roundtrip: </label>
        <input onclick=arrivalOn() type="checkbox" id="roundtrip" name="roundtrip"><br/>
        <label for="depart">Departure Date:</label>
        <input type="date" id="depart" name="depart" required>
        <label class="arrival" for="return">Return Date:</label>
        <input class="arrival" type="date" id=" " name="return">
        <input  class="IptBtn" type="submit" value="Submit">
    </form>
</div>

<input class="IptBtn" type="submit" value="Add Flights" onclick=showAdder()>
</div>
{%if addingFlight%}
<div id = "FlightAdder" style = "text-align: center;  display: block;" >
{%else%}
<div id = "FlightAdder" style = "text-align: center;  display: none;" >
{%endif%}
    <form action="/FlightEditor/addFlight" method ="POST">
        <label>Airplane: </label>
        <select type = "number"  name="airplane" placeholder="airplane" required>
            {% for plane in planes%}
                <option value={{plane['unique_airplane_num']}}>{{plane['unique_airplane_num']}}</option> <!-- Vscode doesn't like that-->
            {% endfor %}
        </select>
        <label>Flight Number</label>
        <input type="number" name="flightnum" placeholder="Flight Number" required><br/>
        <label>Departure Date</label>
        <input  type="date" name="dpdate" required>
        <label>Departure Time</label>
        <input type="time" name="dptime"><br/>
        <label>Arrival Date</label>
        <input  type="date" name="ardate" required>
        <label>Arrival Time</label>
        <input type="time" name="artime"><br/>
        <label>Base Price</label>
        <input name="baseprice" placeholder="Base Price" type = number required><br/>
        <label>Flight Status</label>
        <select name="status" placeholder="status" required>
            <option>ontime</option>
            <option>delayed</option>
            <option>canceled</option>
        </select>
        <Label>Round Trip</Label>
        <input  name="rtrip"  type="checkbox">
        </input>
        <label>Departure Airport</label>
        <select  name="depAir"  required>
            {% for line in airports %}
                <option value={{line['name']}}>{{line['name']}}</option> <!-- Vscode doesn't like that-->
            {% endfor %}
        </select>
        <label>Arrival Airport</label>
        <select  name="arrAir"  required>
            {% for line in airports %}
                <option value={{line['name']}}>{{line['name']}}</option> <!-- Vscode doesn't like that-->
            {% endfor %}
        </select>

        <input type="submit" value="Add"><br/>
        {% if addFlightError %}
        <p class="error">{{addFlightError}}</p>
        {% endif %}
    </form>
</div>

<div class="flights">

{% for line in flights %}
    <div class="card" style="width: 80vw;">
        <div class="card-body" name={{line}}>
            <div class="row">
                <div class="col-2">
                    <h5 class="card-title">{{line['departure_time']}}</h5>
                </div>
                <div class="col-2">
                    <h5 class="card-subtitle mb-2 text-muted">{{line['status_flight']}}</h5>
                    <!-- <a class="word-button" style="color:blue">Edit</a> -->
                    <form  name ="flight_status_form"  action="/FlightEditor/editStatus" method ="POST">
                        <input type="hidden" id="unique_airplane_num" name="unique_airplane_num" value="{{line['unique_airplane_num']}}"> 
                        <input type="hidden" id="flight_number" name="flight_number" value="{{line['flight_number']}}"> 
                        <input type="hidden" id="departure_date" name="departure_date" value="{{line['departure_date']}}"> 
                        <input type="hidden" id="departure_time" name="departure_time" value="{{line['departure_time']}}"> 
                        <select  name = "flight_status_val">
                            <option>ontime</option>
                            <option>delayed</option>
                            <option>canceled</option>
                        </select> <br>
                        <input type = "submit" >
                    </form>
                </div>
                <div class="col-2">
                    <h5 class="card-title">{{line['arrival_time']}}</h5>
                </div>
<!--                Spacing-->
                <div class="col-6"></div>
                <div class="col-1">
                    <h5 style="color:green">572$</h5>  <!-- only needs to be shown when purchasing tickets -->
                </div>
            </div>
            <div class="row">
                <div class="col-2">
                    <h6 class="card-subtitle mb-2 text-muted">{{line['departure_date']}}</h6>
                </div>
                <div class="col-1">

                </div>
                <div class="col-2">
                    <h6 class="card-subtitle mb-2 text-muted">{{line['arrival_date']}}</h6> <!-- only show for roundtrips (else we need to change our db a bit)-->
                </div>
            </div>
            <div class="row">
                <div class="col-2">
                    <h6 class="card-subtitle mb-2 text-muted">{{line['depart_from']}}</h6>
                </div>
                <div class="col-1">

                </div>
                <div class="col-2">
                    <h6 class="card-subtitle mb-2 text-muted">{{line['arrive_at']}}</h6>
                </div>
            </div>
            <p class="card-text"><strong>Length: </strong> {{line['TotalTime']}}</p>
            <a class="word-button" style="color:blue">view_comments</a>  
            <!-- <a class="word-button" style="color:blue">Edit Flight</a>  For later, should only be visible if the user is logged in and only when searching/viewing future flights -->
        </div>
    </div>
{% endfor %}
</div>


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>

<script src="{{ url_for('static', filename='logic.js') }}">
</script>
<script>
    function showAdder(){
        d = document.getElementById("FlightAdder")
        if(d.style.display == "none"){ 
            d.style.display = "block"
        }else{ 
            d.style.display = "none"
        }
    }
    function editFlightStatus(val){
        console.log(val)
    }
    // window.onload = load();
</script>
</html>

<div class="flight" style="display:none;">
    <p>Hello</p>
</div>